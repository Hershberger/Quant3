{
    "collab_server" : "",
    "contents" : "library(causalA16)\n\noptions(stringsAsFactors = FALSE)\n\nfraga_district_stats <-\n  fread(\"inst/extdata/Fraga2016_DistrictStats.csv\")\nfraga_district_treatment <-\n  fread(\"inst/extdata/Fraga2016_DistrictTreatmentResults.csv\")\nsetDT(fraga_district_stats)\n\n# make basic senate election data\nsenate_candidate_DT <- data.table(State =\n    c(\"AL\", \"AZ\", \"CA\", \"FL\", \"IL\", \"MS\", \"NY\", \"NC\", \"SC\", \"TX\"),\n  sen_election_06 = c(0, 1, 1, 1, 0, 1, 1, 0, 0, 1),\n  sen_election_08 = c(1, 0, 0, 0, 1, 1, 0, 1, 1, 1),\n  sen_election_10 = c(1, 1, 1, 1, 1, 0, 1, 1, 1, 0),\n  sen_election_12 = c(0, 1, 1, 1, 0, 1, 1, 0, 0, 1),\n  sen_cand_white06 = c(NA, 1, 1, 1, NA, 1, 1, NA, NA, 1),\n  sen_cand_white08 = c(1, NA, NA, NA, 1, 1, NA, 1, 1, 1),\n  sen_cand_white10 = c(1, 1, 1, 1, 1, NA, 1, 1, 1, NA),\n  sen_cand_white12 = c(NA, 1, 1, 1, NA, 1, 1, NA, NA, 1),\n  sen_cand_black06 = c(NA, 0, 0, 0, NA, 1, 0, NA, NA, 0),\n  sen_cand_black08 = c(1, NA, NA, NA, 0, 1, NA, 0, 0, 0),\n  sen_cand_black10 = c(0, 0, 0, 1, 0, NA, 0, 0, 1, NA),\n  sen_cand_black12 = c(NA, 0, 0, 0, NA, 0, 0, NA, NA, 0),\n  sen_cand_latino06 = c(NA, 0, 0, 0, NA, 0, 0, NA, NA, 0),\n  sen_cand_latino08 = c(0, NA, NA, NA, 0, 0, NA, 0, 0, 1),\n  sen_cand_latino10 = c(0, 0, 0, 1, 0, NA, 0, 0, 0, NA),\n  sen_cand_latino12 = c(NA, 1, 0, 0, NA, 0, 0, NA, NA, 1),\n  sen_cand_asian06 = c(NA, 0, 0, 0, NA, 0, 0, NA, NA, 0),\n  sen_cand_asian08 = c(0, NA, NA, NA, 0, 0, NA, 0, 0, 0),\n  sen_cand_asian10 = c(0, 0, 0, 0, 0, NA, 0, 0, 0, NA),\n  sen_cand_asian12 = c(NA, 0, 0, 0, NA, 0, 0, NA, NA, 0)\n)\n\n# add senate data to replication data\nsenate_candidate_DT <- setDT(merge(fraga_district_stats, senate_candidate_DT,\n  by = \"State\", all = TRUE))\n\n# make dataset with separate observations for different years\nsenate_election_DT <- rbind(\n  data.table(State = senate_candidate_DT$State,\n    PreDist = senate_candidate_DT$PreDist, PostDist = senate_candidate_DT$PostDist,\n    Group = senate_candidate_DT$Group, Turnout_U = senate_candidate_DT$Turnout06_U,\n    Turnout_M = senate_candidate_DT$Turnout06_M,\n    sen_cand_white = senate_candidate_DT$sen_cand_white06,\n    sen_cand_black = senate_candidate_DT$sen_cand_black06,\n    sen_cand_latino = senate_candidate_DT$sen_cand_latino06,\n    sen_cand_asian = senate_candidate_DT$sen_cand_asian06, year = 2006),\n  data.table(State = senate_candidate_DT$State,\n    PreDist = senate_candidate_DT$PreDist, PostDist = senate_candidate_DT$PostDist,\n    Group = senate_candidate_DT$Group, Turnout_U = senate_candidate_DT$Turnout08_U,\n    Turnout_M = senate_candidate_DT$Turnout08_M,\n    sen_cand_white = senate_candidate_DT$sen_cand_white08,\n    sen_cand_black = senate_candidate_DT$sen_cand_black08,\n    sen_cand_latino = senate_candidate_DT$sen_cand_latino08,\n    sen_cand_asian = senate_candidate_DT$sen_cand_asian08, year = 2008),\n  data.table(State = senate_candidate_DT$State,\n    PreDist = senate_candidate_DT$PreDist, PostDist = senate_candidate_DT$PostDist,\n    Group = senate_candidate_DT$Group, Turnout_U = senate_candidate_DT$Turnout10_U,\n    Turnout_M = senate_candidate_DT$Turnout10_M,\n    sen_cand_white = senate_candidate_DT$sen_cand_white10,\n    sen_cand_black = senate_candidate_DT$sen_cand_black10,\n    sen_cand_latino = senate_candidate_DT$sen_cand_latino10,\n    sen_cand_asian = senate_candidate_DT$sen_cand_asian10, year = 2010),\n  data.table(State = senate_candidate_DT$State,\n    PreDist = senate_candidate_DT$PreDist, PostDist = senate_candidate_DT$PostDist,\n    Group = senate_candidate_DT$Group, Turnout_U = senate_candidate_DT$Turnout12_U,\n    Turnout_M = senate_candidate_DT$Turnout12_M,\n    sen_cand_white = senate_candidate_DT$sen_cand_white12,\n    sen_cand_black = senate_candidate_DT$sen_cand_black12,\n    sen_cand_latino = senate_candidate_DT$sen_cand_latino12,\n    sen_cand_asian = senate_candidate_DT$sen_cand_asian12, year = 2012)\n)\n\n# define treatment condition for shared race with Senate candidate\nsenate_election_DT$sen_treatment <- 0\nsenate_election_DT$sen_treatment[senate_election_DT$Group == \"White\"\n  & senate_election_DT$sen_cand_white == 1] <- 1\nsenate_election_DT$sen_treatment[senate_election_DT$Group == \"Black\"\n  & senate_election_DT$sen_cand_black == 1] <- 1\nsenate_election_DT$sen_treatment[senate_election_DT$Group == \"Latino\"\n  & senate_election_DT$sen_cand_latino == 1] <- 1\nsenate_election_DT$sen_treatment[senate_election_DT$Group == \"Asian\"\n  & senate_election_DT$sen_cand_asian == 1] <- 1\n\n# conduct naive difference in means tests across different conditions\nmean(senate_election_DT$Turnout_U[senate_election_DT$sen_treatment == 1]) -\n  mean(senate_election_DT$Turnout_U[senate_election_DT$sen_treatment == 0])\n\nmean(senate_election_DT$Turnout_M[senate_election_DT$sen_treatment == 1]) -\n  mean(senate_election_DT$Turnout_M[senate_election_DT$sen_treatment == 0])\n\nmean(senate_election_DT$Turnout_U[senate_election_DT$sen_treatment == 1 &\n    senate_election_DT$year == 2006 | senate_election_DT$year == 2010]) -\n  mean(senate_election_DT$Turnout_U[senate_election_DT$sen_treatment == 0 &\n      senate_election_DT$year == 2006 | senate_election_DT$year == 2010])\n\nmean(senate_election_DT$Turnout_M[senate_election_DT$sen_treatment == 1 &\n    senate_election_DT$year == 2006 | senate_election_DT$year == 2010]) -\n  mean(senate_election_DT$Turnout_M[senate_election_DT$sen_treatment == 0 &\n      senate_election_DT$year == 2006 | senate_election_DT$year == 2010])\n\nmean(senate_election_DT$Turnout_U[senate_election_DT$sen_treatment == 1 &\n    senate_election_DT$year == 2008 | senate_election_DT$year == 2012]) -\n  mean(senate_election_DT$Turnout_U[senate_election_DT$sen_treatment == 0 &\n      senate_election_DT$year == 2008 | senate_election_DT$year == 2012])\n\nmean(senate_election_DT$Turnout_M[senate_election_DT$sen_treatment == 1 &\n    senate_election_DT$year == 2008 | senate_election_DT$year == 2012]) -\n  mean(senate_election_DT$Turnout_M[senate_election_DT$sen_treatment == 0 &\n      senate_election_DT$year == 2008 | senate_election_DT$year == 2012])\n\nmean(senate_election_DT$Turnout_U[senate_election_DT$sen_treatment == 1 &\n      senate_election_DT$Group == \"Black\"]) -\n  mean(senate_election_DT$Turnout_U[senate_election_DT$sen_treatment == 0 &\n      senate_election_DT$Group == \"Black\"])\n\nmean(senate_election_DT$Turnout_M[senate_election_DT$sen_treatment == 1 &\n    senate_election_DT$Group == \"Black\"]) -\n  mean(senate_election_DT$Turnout_M[senate_election_DT$sen_treatment == 0 &\n      senate_election_DT$Group == \"Black\"])\n\nmean(senate_election_DT$Turnout_U[senate_election_DT$sen_treatment == 1 &\n      senate_election_DT$Group == \"Latino\"]) -\n  mean(senate_election_DT$Turnout_U[senate_election_DT$sen_treatment == 0 &\n      senate_election_DT$Group == \"Latino\"])\n\nmean(senate_election_DT$Turnout_M[senate_election_DT$sen_treatment == 1 &\n    senate_election_DT$Group == \"Latino\"]) -\n  mean(senate_election_DT$Turnout_M[senate_election_DT$sen_treatment == 0 &\n      senate_election_DT$Group == \"Latino\"])\n\n# get counts of observations\nsummary(is.na(senate_election_DT$Turnout_U))\nsummary(is.na(senate_election_DT$Turnout_M))\n\ntable(senate_election_DT$year)\ntable(senate_election_DT$Group)\n",
    "created" : 1476719173710.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "4237841201",
    "id" : "EBB379B9",
    "lastKnownWriteTime" : 1476740989,
    "last_content_update" : 1476740989653,
    "path" : "~/GitHub/Quant3/causalA16/dev/senate-candidate-race.R",
    "project_path" : "dev/senate-candidate-race.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 3,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}