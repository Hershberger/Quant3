{
    "collab_server" : "",
    "contents" : "# build package with functions only\ndevtools::document()\ndevtools::build()\ndevtools::install()\n\n# load package with external data\noptions(stringsAsFactors = FALSE)\nlibrary(causalA16)\nlibrary(data.table)\nfraga_district_stats <-\n  fread(\"inst/extdata/Fraga2016_DistrictStats.csv\")\nfraga_district_treatment <-\n  fread(\"inst/extdata/Fraga2016_DistrictTreatmentResults.csv\")\nsetDT(fraga_district_stats)\n\n# add redistricting stats\nstate_redistrict <- data.table(State = c(unique(fraga_district_stats$State)))\n\npartisan_redistrict <- c(\"AL\", \"FL\", \"IL\", \"MS\", \"NC\", \"NY\", \"SC\", \"TX\")\nlegis_republican_2010 <- c(\"AL\", \"AZ\", \"FL\", \"NC\", \"SC\", \"TX\")\nlegis_republican_2012 <- c(\"AL\", \"AZ\", \"FL\", \"MS\", \"NC\", \"SC\", \"TX\")\nsouth <- c(\"AL\", \"FL\", \"MS\", \"NC\", \"SC\", \"TX\")\n\nstate_redistrict[, partisan_redistrict := 1 * (State %in% partisan_redistrict)]\nstate_redistrict[, legis_republican_2010 := 1 * (State %in% legis_republican_2010)]\nstate_redistrict[, legis_republican_2012 := 1 * (State %in% legis_republican_2012)]\nstate_redistrict[, south := 1 * (State %in% south)]\n\n# create tall data.table with all variables for analysis\n\ndistrict_year06 <- district_year08 <- district_year10 <- district_year12 <-\n  fraga_district_stats\ndistrict_year06$year <- 2006\ndistrict_year08$year <- 2008\ndistrict_year10$year <- 2010\ndistrict_year12$year <- 2012\n\ndistrict_year <- rbind(district_year06, district_year08, district_year10,\n  district_year12)\n\ndistrict_year$turnout_unmatched <- NA\ndistrict_year$turnout_matched <- NA\n\ndistrict_year$turnout_unmatched[district_year$year == 2006] <-\n  district_year$Turnout06_U\ndistrict_year$turnout_matched[district_year$year == 2006] <-\n  district_year$Turnout06_M\ndistrict_year$turnout_unmatched[district_year$year == 2008] <-\n  district_year$Turnout08_U\ndistrict_year$turnout_matched[district_year$year == 2008] <-\n  district_year$Turnout08_M\ndistrict_year$turnout_unmatched[district_year$year == 2010] <-\n  district_year$Turnout10_U\ndistrict_year$turnout_matched[district_year$year == 2010] <-\n  district_year$Turnout10_M\ndistrict_year$turnout_unmatched[district_year$year == 2012] <-\n  district_year$Turnout12_U\ndistrict_year$turnout_matched[district_year$year == 2012] <-\n  district_year$Turnout12_M\n\n# add partisan redistricting variable\ndistrict_year <- merge(district_year, state_redistrict, by = \"State\")\n\n# getting treatment variables\ndistrict_year$coethnic_incumbent <- 0\ndistrict_year$coethnic_incumbent[district_year$Treatment == \"Cand\" |\n  district_year$Treatment == \"Maj\"] <- NA\ndistrict_year$coethnic_incumbent[district_year$Treatment == \"Inc\" &\n  district_year$PostDist == district_year$TreatDist] <- 1\n\ndistrict_year$coethnic_candidate <- 0\ndistrict_year$coethnic_candidate[district_year$Treatment == \"Inc\" |\n    district_year$Treatment == \"Maj\"] <- NA\ndistrict_year$coethnic_candidate[district_year$Treatment == \"Cand\" &\n    district_year$PostDist == district_year$TreatDist] <- 1\n\ndistrict_year$coethnic_district <- 0\ndistrict_year$coethnic_district[district_year$Treatment == \"Inc\" |\n    district_year$Treatment == \"Cand\"] <- NA\ndistrict_year$coethnic_district[district_year$Treatment == \"Maj\" &\n    district_year$PostDist == district_year$TreatDist] <- 1\n\n# district_year$partisan_redistrict[district_year$year != 2012] <- 0\n# district_year$legis_republican[district_year$year != 2012] <- 0\ndistrict_year[, repub_redistrict := partisan_redistrict * legis_republican_2010]\n\ndistrict_year[, c(\"TreatDist\", \"ControlDist\") := NULL]\n\ndistrict_year$partisan_redistrict_2 <- 0\ndistrict_year$partisan_redistrict_2[district_year$year == 2012 &\n    district_year$partisan_redistrict == 1] <- 1\ndistrict_year$legis_republican_2010_2 <- 0\ndistrict_year$legis_republican_2010_2[district_year$year == 2012 &\n    district_year$legis_republican_2010 == 1] <- 1\ndistrict_year$repub_redistrict_2 <- 0\ndistrict_year$repub_redistrict_2[district_year$year == 2012 &\n    district_year$repub_redistrict == 1] <- 1\n\ndistrict_year$pres_election <- 0\ndistrict_year$pres_election[district_year$year == 2008 |\n  district_year$year == 2012] <- 1\n\nsave(district_year, file = \"data/district_year.RData\")\n\nrm(list = ls())\n\nload(\"data/district_year.RData\")\n\n# build package with functions and data\ndevtools::document()\ndevtools::build()\ndevtools::install()\n",
    "created" : 1479138906467.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "674270003",
    "id" : "A2B16809",
    "lastKnownWriteTime" : 1479169472,
    "last_content_update" : 1479169472902,
    "path" : "~/GitHub/Quant3/causalA16/package/prep-package.R",
    "project_path" : "package/prep-package.R",
    "properties" : {
    },
    "relative_order" : 4,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}