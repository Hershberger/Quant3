data = district_year)
summary(ols_6)
ols_7 <- lm(turnout_unmatched ~ south, data = district_year)
summary(ols_7)
ols_8<- lm(turnout_unmatched ~ south + repub_redistrict, data = district_year)
summary(ols_8)
ols_9 <- lm(turnout_unmatched ~ repub_redistrict + coethnic_district + south,
data = district_year)
summary(ols_9)
ols_10 <- lm(turnout_unmatched ~ repub_redistrict + coethnic_district + south,
data = district_year_white)
summary(ols_10)
mean(district_year$turnout_matched[district_year$south == 1])
mean(district_year$turnout_matched[district_year$south == 0])
mean(district_year_white$turnout_matched[district_year_white$south == 0])
mean(district_year_white$turnout_matched[district_year_white$south == 1])
View(district_year_white)
summary(district_year_white$south)
summary(ols_10)
library(AER)
2sls <- 5
?ivreg
two_sls <- ivreg(turnout_unmatched ~ repub_redistrict + coethnic_district |
coethnic_district + south, data = district_year_white, na.action = na.omit)
summary(two_sls)
two_sls <- ivreg(turnout_unmatched ~ repub_redistrict + coethnic_district |
coethnic_district + south, data = district_year_black, na.action = na.omit)
summary(two_sls)
two_sls <- ivreg(turnout_unmatched ~ repub_redistrict_2 + coethnic_district |
coethnic_district + south, data = district_year_black, na.action = na.omit)
summary(two_sls)
two_sls <- ivreg(turnout_unmatched ~ repub_redistrict_2 + coethnic_district
+ pres_election | coethnic_district + south, data = district_year_black
+ pres_election, na.action = na.omit)
summary(two_sls)
two_sls <- ivreg(turnout_unmatched ~ repub_redistrict_2 + coethnic_district
+ pres_election | coethnic_district + south, data = district_year_black
+ pres_election, na.action = na.omit)
View(district_year_black)
two_sls <- ivreg(turnout_unmatched ~ repub_redistrict_2 + coethnic_district
+ pres_election | coethnic_district + south, data = district_year_black
+ pres_election, na.action = na.omit)
two_sls <- ivreg(turnout_unmatched ~ repub_redistrict_2 + coethnic_district
+ pres_election | coethnic_district + south + pres_election,
data = district_year_black, na.action = na.omit)
summary(two_sls)
two_sls <- ivreg(turnout_unmatched ~  south + coethnic_district
+ pres_election | repub_redistrict_2 + coethnic_district + pres_election,
data = district_year_black, na.action = na.omit)
summary(two_sls)
two_sls <- ivreg(turnout_unmatched ~ repub_redistrict_2 * coethnic_district
+ pres_election | coethnic_district * south + pres_election,
data = district_year_black, na.action = na.omit)
summary(two_sls)
??felm
two_sls <- ivreg(turnout_unmatched ~ repub_redistrict_2 * coethnic_district
data = district_year_white, na.action = na.omit)
+ pres_election | coethnic_district * south + pres_election,
summary(two_sls)
two_sls <- ivreg(turnout_unmatched ~ repub_redistrict_2 * coethnic_district
+ pres_election | coethnic_district * south + pres_election,
data = district_year_white, na.action = na.omit)
summary(two_sls)
two_sls <- ivreg(turnout_unmatched ~ repub_redistrict_2 * coethnic_district
+ pres_election | coethnic_district * south + pres_election,
data = district_year_minority, na.action = na.omit)
summary(two_sls)
two_sls_2 <- ivreg(turnout_unmatched ~ repub_redistrict_2 * coethnic_district
+ pres_election | coethnic_district * south + pres_election,
data = district_year_white, na.action = na.omit)
summary(two_sls_2)
two_sls_1 <- ivreg(turnout_unmatched ~ repub_redistrict_2 * coethnic_district
+ pres_election | coethnic_district * south + pres_election,
data = district_year_minority, na.action = na.omit)
summary(two_sls_1)
summary(two_sls_2)
summary(lm(turnout_unmatched ~ repub_redistrict_2 * coethnic_district
+ pres_election))
summary(lm(turnout_unmatched ~ repub_redistrict_2 * coethnic_district
+ pres_election, data = district_year_minority))
summary(lm(turnout_unmatched ~ repub_redistrict_2 * coethnic_district
+ pres_election, data = district_year_white))
library(data.table)
library(AER)
library(lfe)
library(causalA16)
district_year <- district_year
district_year_minority <- district_year[district_year$Group != "White"]
district_year_white <- district_year[district_year$Group == "White"]
district_year_black <- district_year[district_year$Group == "Black"]
two_sls_1 <- ivreg(turnout_matched ~ repub_redistrict_2 * coethnic_district
+ pres_election | coethnic_district * south + pres_election,
data = district_year_minority, na.action = na.omit)
summary(two_sls_1)
two_sls_2 <- ivreg(turnout_matched ~ repub_redistrict_2 * coethnic_district
+ pres_election | coethnic_district * south + pres_election,
data = district_year_white, na.action = na.omit)
summary(two_sls_4)
library(data.table)
library(AER)
library(lfe)
library(causalA16)
district_year <- district_year
district_year_minority <- district_year[district_year$Group != "White"]
district_year_white <- district_year[district_year$Group == "White"]
district_year_black <- district_year[district_year$Group == "Black"]
two_sls_3 <- ivreg(turnout_matched ~ repub_redistrict_2 * coethnic_district
+ pres_election | coethnic_district * south + pres_election,
data = district_year_minority, na.action = na.omit)
summary(two_sls_3)
two_sls_4 <- ivreg(turnout_matched ~ repub_redistrict_2 * coethnic_district
+ pres_election | coethnic_district * south + pres_election,
data = district_year_white, na.action = na.omit)
summary(two_sls_4)
# build package with functions only
devtools::document()
devtools::build()
devtools::install()
# load package with external data
options(stringsAsFactors = FALSE)
library(causalA16)
library(data.table)
fraga_district_stats <-
fread("inst/extdata/Fraga2016_DistrictStats.csv")
fraga_district_treatment <-
fread("inst/extdata/Fraga2016_DistrictTreatmentResults.csv")
setDT(fraga_district_stats)
# add redistricting stats
state_redistrict <- data.table(State = c(unique(fraga_district_stats$State)))
partisan_redistrict <- c("AL", "FL", "IL", "MS", "NC", "NY", "SC", "TX")
legis_republican_2010 <- c("AL", "AZ", "FL", "NC", "SC", "TX")
legis_republican_2012 <- c("AL", "AZ", "FL", "MS", "NC", "SC", "TX")
south <- c("AL", "FL", "MS", "NC", "SC", "TX")
state_redistrict[, partisan_redistrict := 1 * (State %in% partisan_redistrict)]
state_redistrict[, legis_republican_2010 := 1 * (State %in% legis_republican_2010)]
state_redistrict[, legis_republican_2012 := 1 * (State %in% legis_republican_2012)]
state_redistrict[, south := 1 * (State %in% south)]
# create tall data.table with all variables for analysis
district_year06 <- district_year08 <- district_year10 <- district_year12 <-
fraga_district_stats
district_year06$year <- 2006
district_year08$year <- 2008
district_year10$year <- 2010
district_year12$year <- 2012
district_year <- rbind(district_year06, district_year08, district_year10,
district_year12)
district_year$turnout_unmatched <- NA
district_year$turnout_matched <- NA
district_year$turnout_unmatched[district_year$year == 2006] <-
district_year$Turnout06_U
district_year$turnout_matched[district_year$year == 2006] <-
district_year$Turnout06_M
district_year$turnout_unmatched[district_year$year == 2008] <-
district_year$Turnout08_U
district_year$turnout_matched[district_year$year == 2008] <-
district_year$Turnout08_M
district_year$turnout_unmatched[district_year$year == 2010] <-
district_year$Turnout10_U
district_year$turnout_matched[district_year$year == 2010] <-
district_year$Turnout10_M
district_year$turnout_unmatched[district_year$year == 2012] <-
district_year$Turnout12_U
district_year$turnout_matched[district_year$year == 2012] <-
district_year$Turnout12_M
# add partisan redistricting variable
district_year <- merge(district_year, state_redistrict, by = "State")
# getting treatment variables
district_year$coethnic_incumbent <- 0
district_year$coethnic_incumbent[district_year$Treatment == "Cand" |
district_year$Treatment == "Maj"] <- NA
district_year$coethnic_incumbent[district_year$Treatment == "Inc" &
district_year$PostDist == district_year$TreatDist] <- 1
district_year$coethnic_candidate <- 0
district_year$coethnic_candidate[district_year$Treatment == "Inc" |
district_year$Treatment == "Maj"] <- NA
district_year$coethnic_candidate[district_year$Treatment == "Cand" &
district_year$PostDist == district_year$TreatDist] <- 1
district_year$coethnic_district <- 0
district_year$coethnic_district[district_year$Treatment == "Inc" |
district_year$Treatment == "Cand"] <- NA
district_year$coethnic_district[district_year$Treatment == "Maj" &
district_year$PostDist == district_year$TreatDist] <- 1
# district_year$partisan_redistrict[district_year$year != 2012] <- 0
# district_year$legis_republican[district_year$year != 2012] <- 0
district_year[, repub_redistrict := partisan_redistrict * legis_republican_2010]
district_year[, c("TreatDist", "ControlDist") := NULL]
district_year$partisan_redistrict_2 <- 0
district_year$partisan_redistrict_2[district_year$year == 2012 &
district_year$partisan_redistrict == 1] <- 1
district_year$legis_republican_2010_2 <- 0
district_year$legis_republican_2010_2[district_year$year == 2012 &
district_year$legis_republican_2010 == 1] <- 1
district_year$repub_redistrict_2 <- 0
district_year$repub_redistrict_2[district_year$year == 2012 &
district_year$repub_redistrict == 1] <- 1
district_year$pres_election <- 0
district_year$pres_election[district_year$year == 2008 |
district_year$year == 2012] <- 1
save(district_year, file = "data/district_year.RData")
rm(list = ls())
load("data/district_year.RData")
# build package with functions and data
devtools::document()
devtools::build()
devtools::install()
library(data.table)
library(AER)
library(lfe)
library(causalA16)
district_year <- district_year
district_year_minority <- district_year[district_year$Group != "White"]
district_year_white <- district_year[district_year$Group == "White"]
district_year_black <- district_year[district_year$Group == "Black"]
library(texreg)
two_sls_1 <- ivreg(turnout_unmatched ~ repub_redistrict_2 * coethnic_district
+ pres_election | coethnic_district * south + pres_election,
data = district_year_minority, na.action = na.omit)
screenreg(two_sls_1)
two_sls_2 <- ivreg(turnout_unmatched ~ repub_redistrict_2 * coethnic_district
+ pres_election | coethnic_district * south + pres_election,
data = district_year_white, na.action = na.omit)
screenreg(two_sls_2)
texreg(two_sls_1, two_sls_2)
?texreg
texreg(two_sls_1, two_sls_2, file = NULL)
texreg(two_sls_1, file = NULL)
two_sls <- rbind(two_sls_1, two_sls_2)
texreg(two_sls)
texreg(two_sls_1)
texreg(two_sls_2)
ols_1 <- lm(turnout_matched ~ repub_redistrict_2, data = district_year_minority)
screenreg(ols_1)
ols_2 <- lm(turnout_matched ~ repub_redistrict_2 + pres_election,
data = district_year_minority)
screenreg(ols_2)
ols_3 <- lm(turnout_matched ~ repub_redistrict_2 + pres_election + south,
data = district_year)
screenreg(ols_3)
library(data.table)
library(AER)
library(lfe)
library(texreg)
library(causalA16)
district_year <- district_year
district_year_minority <- district_year[district_year$Group != "White"]
district_year_white <- district_year[district_year$Group == "White"]
district_year_black <- district_year[district_year$Group == "Black"]
ols_5 <- lm(turnout_unmatched ~ repub_redistrict_2 + pres_election
+ coethnic_candidate,
data = district_year_white)
summary(ols_4)
summary(ols_5)
ols_6 <- lm(turnout_matched ~ pres_election
+ coethnic_candidate * repub_redistrict_2,
data = district_year_black)
summary(ols_6)
ols_6 <- lm(turnout_matched ~ pres_election
+ coethnic_candidate * repub_redistrict_2,
data = district_year_minority)
summary(ols_6)
ols_5 <- lm(turnout_unmatched ~ repub_redistrict_2 + pres_election
+ coethnic_candidate,
data = district_year_minority)
summary(ols_5)
ols_6 <- lm(turnout_matched ~ pres_election + south
+ coethnic_candidate * repub_redistrict_2,
data = district_year_minority)
summary(ols_6)
ols_6 <- lm(turnout_matched ~ pres_election
+ coethnic_candidate * repub_redistrict_2,
data = district_year_minority)
summary(ols_6)
texreg(list(ols_1, ols_2, ols_3, ols_4, ols_5, ols_6))
library(data.table)
library(AER)
library(lfe)
library(texreg)
library(causalA16)
district_year <- district_year
district_year_minority <- district_year[district_year$Group != "White"]
district_year_white <- district_year[district_year$Group == "White"]
district_year_black <- district_year[district_year$Group == "Black"]
# # Matched Regression # #
ols_1 <- lm(turnout_matched ~ repub_redistrict_2, data = district_year_minority)
screenreg(ols_1)
ols_2 <- lm(turnout_matched ~ repub_redistrict_2 + pres_election,
data = district_year_minority)
screenreg(ols_2)
ols_3 <- lm(turnout_matched ~ pres_election + south,
data = district_year_minority)
screenreg(ols_3)
ols_4 <- lm(turnout_matched ~ repub_redistrict_2 + pres_election + south,
data = district_year)
screenreg(ols_4_minority)
ols_5 <- lm(turnout_unmatched ~ repub_redistrict_2 + pres_election
+ coethnic_candidate,
data = district_year_minority)
summary(ols_5)
ols_6 <- lm(turnout_matched ~ pres_election
+ coethnic_candidate * repub_redistrict_2,
data = district_year_minority)
summary(ols_6)
texreg(list(ols_1, ols_2, ols_3, ols_4, ols_5, ols_6))
ols_5 <- lm(turnout_unmatched ~ repub_redistrict_2 + pres_election + south
+ coethnic_candidate,
data = district_year_minority)
summary(ols_5)
ols_6 <- lm(turnout_matched ~ pres_election + south
+ coethnic_candidate * repub_redistrict_2,
data = district_year_minority)
summary(ols_6)
ols_5 <- lm(turnout_unmatched ~ repub_redistrict_2 + pres_election + south
+ coethnic_district,
data = district_year_minority)
summary(ols_5)
ols_6 <- lm(turnout_matched ~ pres_election + south
+ coethnic_district * repub_redistrict_2,
data = district_year_minority)
summary(ols_6)
texreg(list(ols_1, ols_2, ols_3, ols_4, ols_5, ols_6))
ols_7 <- lm(turnout_unmatched ~ repub_redistrict_2 + pres_election + south
+ coethnic_district,
data = district_year_minority)
summary(ols_7)
ols_8 <- lm(turnout_matched ~ pres_election
+ coethnic_district * repub_redistrict_2,
data = district_year_minority)
summary(ols_8)
ols_7 <- lm(turnout_unmatched ~ repub_redistrict_2 + pres_election + south
+ coethnic_district,
data = district_year_minority)
summary(ols_7)
ols_8 <- lm(turnout_matched ~ pres_election
+ coethnic_district * repub_redistrict_2,
data = district_year_minority)
summary(ols_8)
ols_7 <- lm(turnout_unmatched ~ repub_redistrict_2 + pres_election
+ coethnic_district,
data = district_year_minority)
summary(ols_7)
ols_8 <- lm(turnout_matched ~ pres_election
+ coethnic_district * repub_redistrict_2,
data = district_year_minority)
summary(ols_8)
texreg(list(ols_7, ols_8))
table(district_year$State)
summary(lm(turnout ~ south, data = district_year_minority))
View(district_year_minority)
summary(lm(turnout_unmatched ~ south, data = district_year_minority))
summary(lm(turnout_unmatched ~ south + coethnic_district, data = district_year_minority))
summary(lm(turnout_unmatched ~ south + coethnic_district + pres_election, data = district_year_minority))
?felm
library(data.table)
library(AER)
library(lfe)
library(texreg)
library(wfe)
library(causalA16)
district_year <- district_year
district_year_minority <- district_year[district_year$Group != "White"]
district_year_white <- district_year[district_year$Group == "White"]
district_year_black <- district_year[district_year$Group == "Black"]
felm_1 <- felm(turnout_matched ~  coethnic_district + repub_redistrict_2 |
State + year | 0 | State,
data = district_year_minority)
screenreg(felm_1)
felm_1 <- felm(turnout_matched ~ repub_redistrict_2 |
State + year | 0 | State,
data = district_year_minority)
screenreg(felm_1)
felm_2 <- felm(turnout_matched ~  coethnic_district + repub_redistrict_2
+ south + pres_election |
State + year | 0 | State,
data = district_year_minority)
screenreg(felm_2)
felm_1 <- felm(turnout_unmatched ~  coethnic_district + repub_redistrict_2 |
State + year | 0 | State,
data = district_year_minority)
screenreg(felm_1)
felm_2 <- felm(turnout_matched ~  coethnic_district + repub_redistrict_2 |
State + year | 0 | State,
data = district_year_minority)
screenreg(felm_2)
felm_1 <- felm(turnout_unmatched ~  coethnic_district + repub_redistrict_2 |
State + year | 0 | State,
data = district_year_minority)
screenreg(felm_1)
felm_2 <- felm(turnout_matched ~  coethnic_district + repub_redistrict_2 |
State + year | 0 | State,
data = district_year_minority)
screenreg(felm_2)
texreg(list(felm_1, felm_2))
felm_3 <- felm(turnout_unmatched ~  coethnic_district + repub_redistrict_2
+ south |
year | 0 | year,
data = district_year_minority)
felm_3 <- felm(turnout_unmatched ~  coethnic_district + repub_redistrict_2
+ south | year | 0 | State,
data = district_year_minority)
screenreg(felm_3)
felm_4 <- felm(turnout_matched ~  coethnic_district + repub_redistrict_2
+ south |
year | 0 | State,
data = district_year_minority)
screenreg(felm_4)
felm_5 felm(turnout_unmatched ~  coethnic_district + repub_redistrict_2
+ pres_election |
State | 0 | State,
data = district_year_minority)
felm_5 felm(turnout_unmatched ~  coethnic_district + repub_redistrict_2
felm_5 <- felm(turnout_unmatched ~  coethnic_district + repub_redistrict_2
+ pres_election |
State | 0 | State,
data = district_year_minority)
screenreg(felm_5)
felm_6 <- felm(turnout_matched ~  coethnic_district + repub_redistrict_2
+ pres_election |
State | 0 | State,
data = district_year_minority)
screenreg(felm_6)
felm_6 <- felm(turnout_matched ~  coethnic_district + repub_redistrict_2
+ pres_election |
south | 0 | State,
data = district_year_minority)
screenreg(felm_6)
felm_6 <- felm(turnout_matched ~  coethnic_incumbent + repub_redistrict_2
+ pres_election |
State | 0 | State,
data = district_year_minority)
screenreg(felm_6)
felm_6 <- felm(turnout_matched ~  coethnic_district + repub_redistrict_2
+ pres_election |
State | 0 | State,
data = district_year_minority)
screenreg(felm_6)
felm_5 <- felm(turnout_unmatched ~  coethnic_district + repub_redistrict_2
+ pres_election |
State | 0 | State,
data = district_year_minority)
screenreg(felm_5)
summary(lm(repub_redistrict_2 ~ south))
summary(lm(repub_redistrict_2 ~ south, data = district_year_minority))
summary(lm(repub_redistrict_2 ~ south + coethnic_district, data = district_year_minority))
summary(lm(repub_redistrict_2 ~ south + coethnic_district + pres_election, data = district_year_minority))
?ivreg
summary(ivreg(turnout_unmatched ~ repub_redistrict_2 | south))
summary(ivreg(turnout_unmatched ~ repub_redistrict_2 | south, data = district_year_minority))
two_stage_1 <- ivreg(turnout_unmatched ~ repub_redistrict_2 | south,
data = district_year_minority)
summary(two_stage_1)
two_stage_1 <- ivreg(turnout_unmatched ~ repub_redistrict_2 + pres_election
+ coethnic_district | south + pres_election + coethnic_district,
data = district_year_minority)
summary(two_stage_1)
two_stage_1 <- ivreg(turnout_matched ~ repub_redistrict_2 + pres_election
+ coethnic_district | south + pres_election + coethnic_district,
data = district_year_minority)
summary(two_stage_1)
summary(two_stage_2)
two_stage_2 <- ivreg(turnout_matched ~ repub_redistrict_2 + pres_election
+ coethnic_district | south + pres_election + coethnic_district,
data = district_year_minority)
summary(two_stage_2)
two_stage_1 <- ivreg(turnout_matched ~ repub_redistrict_2 + coethnic_district
| south + coethnic_district,
data = district_year_minority)
summary(two_stage_1)
two_stage_0 <- ivreg(turnout_matched ~ repub_redistrict_2 | south,
data = district_year_minority)
summary(two_stage_0)
two_stage_3 <- ivreg(turnout_matched ~ repub_redistrict_2 * coethnic_district
+ pres_election | south * coethnic_district + pres_election,
data = district_year_minority)
summary(two_stage_3)
summary(two_stage_2)
summary(two_stage_3)
two_stage_0w <- ivreg(turnout_matched ~ repub_redistrict_2 | south,
data = district_year_white)
summary(two_stage_0w)
two_stage_1w <- ivreg(turnout_matched ~ repub_redistrict_2 + coethnic_district
| south + coethnic_district,
data = district_year_white)
summary(two_stage_1w)
two_stage_2w <- ivreg(turnout_matched ~ repub_redistrict_2 + pres_election
+ coethnic_district | south + pres_election + coethnic_district,
data = district_year_white)
summary(two_stage_2w)
two_stage_3w <- ivreg(turnout_matched ~ repub_redistrict_2 * coethnic_district
+ pres_election | south * coethnic_district + pres_election,
data = district_year_white)
summary(two_stage_3w)
texreg(list(two_stage_0, two_stage_1, two_stage_2, two_stage_3))
texreg(list(two_stage_0w, two_stage_1w, two_stage_2w, two_stage_3w))
felm_4 <- felm(turnout_matched ~  coethnic_district + repub_redistrict_2
+ south |
year | 0 | State,
data = district_year_minority)
screenreg(felm_4)
felm_3 <- felm(turnout_unmatched ~  coethnic_district + repub_redistrict_2
+ south | year | 0 | State,
data = district_year_minority)
screenreg(felm_3)
felm_5 <- felm(turnout_unmatched ~  coethnic_district + repub_redistrict_2
+ pres_election |
State | 0 | State,
data = district_year_minority)
screenreg(felm_5)
felm_6 <- felm(turnout_matched ~  coethnic_district + repub_redistrict_2
+ pres_election |
State | 0 | State,
data = district_year_minority)
screenreg(felm_6)
